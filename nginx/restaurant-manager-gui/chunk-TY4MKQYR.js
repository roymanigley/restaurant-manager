import{a as he}from"./chunk-HFWTKFKQ.js";import{a as ve}from"./chunk-AJK6VEQI.js";import{a as ue,b as fe,c as _e}from"./chunk-UZ2FXXJ4.js";import{b as se}from"./chunk-MZ4LUD7G.js";import"./chunk-TSIVVEAZ.js";import{$a as ie,A as k,Ab as de,B as S,Ba as Q,C as l,Fa as Z,Ha as J,J as i,Ja as K,K as r,L as c,M as U,N as I,O as f,S as M,Sa as G,T as o,U as s,Wa as C,X as j,Xa as W,Ya as X,Za as ee,_a as te,ab as re,ba as _,bb as ne,cb as oe,da as v,db as me,ea as A,j as x,ja as H,jb as ae,k as F,kb as pe,l as y,n as D,na as w,o as V,oa as q,pa as $,q as E,r as b,s as B,u as P,v as m,w as u,wa as Y,wb as le,ya as z,zb as ce}from"./chunk-ZVRC6D75.js";var h=(()=>{class t extends se{getBaseUrl(){return"/api/staff/orders"}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=B(t)))(a||t)}})()}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function De(t,p){t&1&&(i(0,"th"),o(1,"Date"),r(),i(2,"th"),o(3,"Table"),r(),i(4,"th"),o(5,"State"),r(),i(6,"th"),o(7,"Item"),r(),i(8,"th"),o(9,"Amount"),r(),i(10,"th"),o(11,"Price Total"),r())}function we(t,p){if(t&1&&(i(0,"td"),o(1),_(2,"date"),r(),i(3,"td"),o(4),r(),i(5,"td"),o(6),r(),i(7,"td")(8,"p"),o(9),r()(),i(10,"td"),o(11),r(),i(12,"td"),o(13),_(14,"currency"),r()),t&2){let e=p.$implicit,n=f();m(),s(v(2,6,e.date,"dd.MM.yyyy")),m(3),s(e.table_name),m(2),s(e.state),m(3),s(e.item_name),m(2),s(e.amount),m(2),s(v(14,9,e.amount*e.price_per_item,n.DEFAULT_CURRENCY))}}var xe=(()=>{class t{constructor(e){this.orderService=e,this.DEFAULT_CURRENCY=le}static{this.\u0275fac=function(n){return new(n||t)(u(h))}}static{this.\u0275cmp=D({type:t,selectors:[["app-order-list"]],decls:6,vars:3,consts:[["templateColumns",""],["templateRow",""],["header","Orders"],["permission_model","order",3,"service","templateRow","templateColumns"]],template:function(n,a){if(n&1&&(i(0,"p-card",2)(1,"app-crud-table",3),S(2,De,12,0,"ng-template",null,0,A)(4,we,15,12,"ng-template",null,1,A),r()()),n&2){let d=M(3),g=M(5);m(),l("service",a.orderService)("templateRow",g)("templateColumns",d)}},dependencies:[G,ce,q,w]})}}return t})();var T=class{constructor(p,e,n,a,d,g,N,ye,Ee,be){this.id=p,this.occupation=e,this.state=n,this.table_name=a,this.item_name=d,this.item_image=g,this.date=N,this.price_per_item=ye,this.amount=Ee,this.item=be}};function Re(t,p){if(t&1&&(i(0,"div",22)(1,"div"),o(2),_(3,"date"),_(4,"date"),r()()),t&2){let e=p.$implicit;m(2),j("",e.table_name," ",v(3,3,e.start,"dd.MM.yyyy HH:mm")," - ",v(4,6,e.end,"dd.MM.yyyy HH:mm"),"")}}function Te(t,p){if(t&1&&(i(0,"div",22)(1,"div"),o(2),_(3,"date"),_(4,"date"),r()()),t&2){let e=p.$implicit;m(2),j("",e.table_name," ",v(3,3,e.start,"dd.MM.yyyy HH:mm")," - ",v(4,6,e.end,"dd.MM.yyyy HH:mm"),"")}}function Ne(t,p){if(t&1&&(i(0,"div",22)(1,"div"),o(2),r()()),t&2){let e=p.$implicit;m(2),s(e.name)}}function Me(t,p){if(t&1&&(i(0,"div",22),c(1,"img",23),i(2,"div"),o(3),r()()),t&2){let e=p.$implicit;m(),l("src",e.image,P),m(2),s(e.name)}}function je(t,p){if(t&1){let e=U();i(0,"form",2),I("ngSubmit",function(){E(e);let a=f();return b(a.save())}),i(1,"div",3)(2,"div",4)(3,"p-inputGroup")(4,"p-inputGroupAddon"),c(5,"i",5),r(),i(6,"p-floatLabel")(7,"p-dropdown",6),I("onChange",function(a){E(e);let d=f();return b(d.itemSelect(a))}),S(8,Re,5,9,"ng-template",7)(9,Te,5,9,"ng-template",8),r(),i(10,"label",9),o(11,"Occupation"),r()()()(),i(12,"div",10)(13,"p-inputGroup")(14,"p-inputGroupAddon"),c(15,"i",5),r(),i(16,"p-floatLabel")(17,"p-dropdown",11),I("onChange",function(a){E(e);let d=f();return b(d.itemSelect(a))}),S(18,Ne,3,1,"ng-template",7)(19,Me,4,2,"ng-template",8),r(),i(20,"label",12),o(21,"Item"),r()()()(),i(22,"div",10)(23,"p-inputGroup")(24,"p-inputGroupAddon"),c(25,"i",5),r(),i(26,"p-floatLabel"),c(27,"p-inputNumber",13),i(28,"label",14),o(29,"Price per item"),r()()()(),i(30,"div",10)(31,"p-inputGroup")(32,"p-inputGroupAddon"),c(33,"i",5),r(),i(34,"p-floatLabel"),c(35,"p-inputNumber",15),i(36,"label",16),o(37,"Amount"),r()()()(),i(38,"div",10)(39,"p-inputGroup")(40,"p-inputGroupAddon"),c(41,"i",5),r(),i(42,"p-floatLabel"),c(43,"p-dropdown",17),i(44,"label",18),o(45,"State"),r()()()(),i(46,"div",19),c(47,"p-button",20),i(48,"p-button",21),I("click",function(){E(e);let a=f();return b(a.back())}),r()()()()}if(t&2){let e=f();l("formGroup",e.formGroup),m(7),l("options",e.occupations),m(10),l("options",e.items),m(26),l("options",e.states),m(4),l("rounded",!0)("disabled",e.formGroup.invalid),m(),l("rounded",!0)}}var L=(()=>{class t extends ue{constructor(e,n,a,d,g,N){super(e,d),this.service=e,this.itemService=n,this.occupationService=a,this.activatedRoute=d,this.formBuilder=g,this.authService=N,this.states=["OPEN","IN_PROGRESS","COMPLETED","CANCELED"],this.items=[],this.occupations=[]}ngOnInit(){super.ngOnInit(),this.itemService.fetchAllRecords(0,25).subscribe(e=>this.items=e.results),this.occupationService.fetchAllRecords(0,25).subscribe(e=>this.occupations=e.results)}createNewRecord(){return new T}initForm(){this.formGroup=this.formBuilder.group({occupation:[this.record?.occupation??null,[C.required]],state:[this.record?.state??null,[C.required]],item:[this.record?.item??null,[C.required]],price_per_item:[this.record?.price_per_item??null,[C.required]],amount:[this.record?.amount??null,[C.required]]})}itemSelect(e){console.log(e),this.formGroup?.patchValue({price_per_item:this.items.find(n=>n.id==e.value)?.price})}static{this.\u0275fac=function(n){return new(n||t)(u(h),u(ve),u(he),u(Y),u(re),u(K))}}static{this.\u0275cmp=D({type:t,selectors:[["app-order-detail"]],features:[k],decls:2,vars:1,consts:[["header","Detail"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"grid","gap-2"],[1,"col-12"],[1,"pi","pi-list"],["id","occupation","formControlName","occupation","optionValue","id",3,"onChange","options"],["pTemplate","selectedItem"],["pTemplate","item"],["for","occupation"],[1,"lg:col-4","md:col-4","col-12"],["id","item","formControlName","item","optionValue","id",3,"onChange","options"],["for","item"],["id","price_per_item","formControlName","price_per_item"],["for","price_per_item"],["id","amount","formControlName","amount"],["for","amount"],["id","state","formControlName","state",3,"options"],["for","state"],[1,"col-12","flex","justify-content-center","gap-3"],["icon","pi pi-save","type","submit",3,"rounded","disabled"],["icon","pi pi-times","type","button","severity","danger",3,"click","rounded"],[1,"flex","align-items-center","gap-2"],[2,"width","18px",3,"src"]],template:function(n,a){n&1&&(i(0,"p-card",0),S(1,je,49,7,"form",1),r()),n&2&&(m(),l("ngIf",a.formGroup))},dependencies:[H,Z,J,G,ne,oe,me,pe,ae,ee,W,X,te,ie,w],styles:[".p-checkbox,   .p-checkbox-box{height:100%}"]})}}return t})();var Ce=(()=>{class t extends fe{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||t)(y(h))}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ge=(()=>{class t extends _e{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||t)(y(h),y(z))}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ae=[{path:"",component:xe,resolve:{records:Ce},runGuardsAndResolvers:"pathParamsOrQueryParamsChange"},{path:"new",component:L},{path:":id",component:L,resolve:{record:ge}}],ft=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=V({type:t})}static{this.\u0275inj=F({imports:[$,de,Q.forChild(Ae)]})}}return t})();export{ft as OrderModule};
