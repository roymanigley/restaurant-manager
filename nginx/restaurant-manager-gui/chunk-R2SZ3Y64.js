import{a as c}from"./chunk-AJK6VEQI.js";import{a as de,b as ue,c as fe}from"./chunk-UZ2FXXJ4.js";import"./chunk-MZ4LUD7G.js";import"./chunk-TSIVVEAZ.js";import{$a as ee,A as V,Ab as ce,B as v,Ba as H,C as p,Ha as $,J as r,Ja as K,K as o,L as m,M,N as b,O as s,S as R,Sa as y,T as l,U as D,Va as Q,Wa as C,Xa as J,Ya as W,Za as X,_a as Z,ab as te,ba as k,bb as ie,c as T,cb as re,da as B,db as oe,e as F,ea as N,eb as ne,j as g,ja as O,jb as me,k as U,kb as ae,l as h,n as I,o as j,oa as P,ob as pe,pa as q,q as x,r as _,u as S,v as a,w as u,wa as z,wb as le,ya as Y,zb as se}from"./chunk-ZVRC6D75.js";function _e(t,f){t&1&&(r(0,"th"),l(1,"Name"),o(),r(2,"th"),l(3,"Image"),o(),r(4,"th"),l(5,"Price"),o())}function Se(t,f){if(t&1&&(r(0,"td"),l(1),o(),r(2,"td"),m(3,"img",4),o(),r(4,"td"),l(5),k(6,"currency"),o()),t&2){let e=f.$implicit,i=s();a(),D(e.name),a(2),p("src",e.image,S),a(2),D(B(6,3,e.price,i.DEFAULT_CURRENCY))}}var he=(()=>{class t{constructor(e){this.itemService=e,this.DEFAULT_CURRENCY=le}static{this.\u0275fac=function(i){return new(i||t)(u(c))}}static{this.\u0275cmp=I({type:t,selectors:[["app-item-list"]],decls:6,vars:3,consts:[["templateColumns",""],["templateRow",""],["header","Items"],["permission_model","item",3,"service","templateRow","templateColumns"],["width","100",1,"shadow-4",3,"src"]],template:function(i,n){if(i&1&&(r(0,"p-card",2)(1,"app-crud-table",3),v(2,_e,6,0,"ng-template",null,0,N)(4,Se,7,6,"ng-template",null,1,N),o()()),i&2){let d=R(3),G=R(5);a(),p("service",n.itemService)("templateRow",G)("templateColumns",d)}},dependencies:[y,se,P]})}}return t})();var w=class{constructor(f,e,i,n,d,G,ge){this.id=f,this.name=e,this.description=i,this.price=n,this.category=d,this.image=G,this.restaurant=ge}};function ye(t,f){if(t&1&&m(0,"img",19),t&2){let e=s(2);p("src",e.record==null?null:e.record.image,S)}}function Ee(t,f){if(t&1){let e=M();r(0,"form",2),b("ngSubmit",function(){x(e);let n=s();return _(n.save())}),r(1,"div",3)(2,"div",4)(3,"p-inputGroup")(4,"p-inputGroupAddon"),m(5,"i",5),o(),r(6,"p-floatLabel"),m(7,"input",6),r(8,"label",7),l(9,"Name"),o()()()(),r(10,"div",4)(11,"p-inputGroup")(12,"p-inputGroupAddon"),m(13,"i",5),o(),r(14,"p-floatLabel"),m(15,"input",8),r(16,"label",9),l(17,"Description"),o()()()(),r(18,"div",4)(19,"p-inputGroup")(20,"p-inputGroupAddon"),m(21,"i",5),o(),r(22,"p-floatLabel"),m(23,"p-inputNumber",10),r(24,"label",11),l(25,"Price"),o()()()(),r(26,"div",4)(27,"p-inputGroup")(28,"p-inputGroupAddon"),m(29,"i",5),o(),r(30,"p-floatLabel"),m(31,"p-dropdown",12),r(32,"label",13),l(33,"Category"),o()()()(),r(34,"div",4),v(35,ye,1,1,"img",14),r(36,"p-fileUpload",15),b("onUpload",function(n){x(e);let d=s();return _(d.onUpload(n))}),o()(),r(37,"div",16),m(38,"p-button",17),r(39,"p-button",18),b("click",function(){x(e);let n=s();return _(n.back())}),o()()()()}if(t&2){let e=s();p("formGroup",e.formGroup),a(31),p("options",e.categories),a(4),p("ngIf",e.record==null?null:e.record.image),a(),p("auto",!0)("multiple",!1),a(2),p("rounded",!0)("disabled",e.formGroup.invalid),a(),p("rounded",!0)}}var A=(()=>{class t extends de{constructor(e,i,n,d){super(e,i),this.service=e,this.activatedRoute=i,this.formBuilder=n,this.authService=d,this.categories=["BEVERAGE_NON_ALCOHOLIC","BEVERAGE_ALCOHOLIC","SNACK","STARTER","MAIN","DESSERT"]}createNewRecord(){let e=new w;return e.restaurant=this.authService.user$.getValue().restaurant,e}initForm(){this.formGroup=this.formBuilder.group({name:[this.record?.name??null,[C.required]],description:[this.record?.description??null,[C.required]],price:[this.record?.price??null,[C.required]],category:[this.record?.category??null,[C.required]],restaurant:[this.record?.restaurant]})}onUpload(e){this.file=e.files[0]}save(){if(this.formGroup?.valid){let e;this.record?.id?e=this.service.update(this.record.id,this.formGroup.value):e=this.service.create(this.formGroup.value),e.pipe(F(i=>this.file?this.service.addImage(i.id,this.file):T(i))).subscribe(()=>this.back())}}static{this.\u0275fac=function(i){return new(i||t)(u(c),u(z),u(te),u(K))}}static{this.\u0275cmp=I({type:t,selectors:[["app-item-detail"]],features:[V],decls:2,vars:1,consts:[["header","Detail"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"grid","gap-2"],[1,"lg:col-4","md:col-4","col-12"],[1,"pi","pi-list"],["pInputText","","id","name","formControlName","name"],["for","name"],["pInputText","","id","description","formControlName","description"],["for","description"],["id","price","formControlName","price"],["for","price"],["id","category","formControlName","category",3,"options"],["for","category"],["width","100","class","shadow-4",3,"src",4,"ngIf"],["mode","basic","chooseLabel","Choose","chooseIcon","pi pi-upload","name","demo[]","url","https://www.primefaces.org/cdn/api/upload.php","accept","image/*","maxFileSize","1000000",3,"onUpload","auto","multiple"],[1,"col-12","flex","justify-content-center","gap-3"],["icon","pi pi-save","type","submit",3,"rounded","disabled"],["icon","pi pi-times","type","button","severity","danger",3,"click","rounded"],["width","100",1,"shadow-4",3,"src"]],template:function(i,n){i&1&&(r(0,"p-card",0),v(1,Ee,40,8,"form",1),o()),i&2&&(a(),p("ngIf",n.formGroup))},dependencies:[O,$,y,ie,re,oe,ne,ae,me,X,Q,J,W,pe,Z,ee],styles:[".p-checkbox,   .p-checkbox-box{height:100%}"]})}}return t})();var ve=(()=>{class t extends ue{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||t)(h(c))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ce=(()=>{class t extends fe{constructor(e,i){super(e,i)}static{this.\u0275fac=function(i){return new(i||t)(h(c),h(Y))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var we=[{path:"",component:he,resolve:{records:ve},runGuardsAndResolvers:"pathParamsOrQueryParamsChange"},{path:"new",component:A},{path:":id",component:A,resolve:{record:Ce}}],rt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=j({type:t})}static{this.\u0275inj=U({imports:[q,ce,H.forChild(we)]})}}return t})();export{rt as ItemModule};
